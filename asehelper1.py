
#!/usr/bin/evn python
#-*- encoding: utf-8 -*-

import pyaes
import base64

# PKCS7 padding
def pad(data):
    padding_len = 16 - (len(data) % 16)
    return data + bytes([padding_len] * padding_len)

def unpad(data):
    padding_len = data[-1]
    return data[:-padding_len]

def encrypt(plaintext, key, iv):
    key_bytes = key.encode('utf-8')
    iv_bytes = iv.encode('utf-8')
    data_bytes = pad(plaintext.encode('utf-8'))

    aes = pyaes.AESModeOfOperationCBC(key_bytes, iv=iv_bytes)
    encrypted = aes.encrypt(data_bytes)
    return base64.b64encode(encrypted).decode('utf-8')

def decrypt(encrypted_base64, key, iv):
    key_bytes = key.encode('utf-8')
    iv_bytes = iv.encode('utf-8')
    encrypted_bytes = base64.b64decode(encrypted_base64)

    aes = pyaes.AESModeOfOperationCBC(key_bytes, iv=iv_bytes)
    decrypted = aes.decrypt(encrypted_bytes)
    return unpad(decrypted).decode('utf-8')

# 示例
if __name__ == '__main__':
    key = "844dd1be967b6e9e"  # 16 字节
    iv = "cdb421d038104126"   # 16 字节
    
#    key = "b4d617b336124c63"  # 16 字节
#    iv = "b4d1a58a416957a5"   # 16 字节
    
    text = "13066784721"

    enc = encrypt(text, key, iv)
    print("Encrypted:", enc)

    dec = decrypt("pTL691qt08FDYL1Xeq902Q==", key, iv)
    print("Decrypted:", dec)

    phones = [('124314', '18827370499'), ('193042',  '13920000111'), ('197390',  '13698741472'), ('212210',  '11411918191'), ('229412',  '13488888888'), ('241302',  '13698747147'), ('244742',  '18600000000'), ('248659',  '18600000000'), ('259699',  '13920000111'), ('435002',  '17390039573'), ('515211',  '13842019964'), ('643220',  '13508609425'), ('660493',  '13889169591'), ('665286',  '18627761007'), ('665567',  '18741159564'), ('666897',  '15123047655'), ('669941',  '19818940894'), ('671680',  '13464029566'), ('675668',  '13983712350'), ('678243',  '13197450922'), ('678909',  '16542558888'), ('679700',  '13941549238  '), ('680020',  '13983245870'), ('680502',  '15103500969'), ('680668',  '15242995888'), ('681177',  '17771413416'), ('681319',  '18004219753'), ('681649',  '18519124485'), ('681656',  '18134500543'), ('681859',  '13701476477'), ('682105',  '13944118909'), ('682890',  '15940230407'), ('682964',  '13190047620'), ('683042',  '15929928569'), ('683049',  '13394301191'), ('683640',  '15042756220'), ('683758',  '15155960733'), ('683874',  '13504360093'), ('683885',  '13234191369'), ('683909',  '13739281228'), ('683943',  '13819992129'), ('683987',  '13645151629'), ('683990',  '13324476167'), ('684026',  '15668575627'), ('684052',  '13940037103'), ('684145',  '15658103959'), ('684148',  '13889320626'), ('684180',  '13053042636'), ('684304',  '13871283312'), ('684307',  '15375055267'), ('684371', '15337152403')]
    phones = [('376634',  '12319181918'), ('305619',  '13010000100'), ('342504',  '13200000000'), ('336528',  '13250001200'), ('331643',  '13488888888'), ('398714',  '13633333333'), ('373717',  '13698741472'), ('364955',  '13698747147'), ('332425',  '137000000000'), ('336814',  '1392000011111')]
    phones = [('304896',  '11231231230'), ('337911',  '12022211002'), ('317148',  '12303021010'), ('377599',  '14119181918'), ('359757',  '14147414741'), ('342340',  '15011111111'), ('328858',  '15600000000'), ('693903',  '15600789911'), ('335695',  '15800000000'), ('332624',  '17600000000'), ('326481',  '18600000000'), ('606606',  '18841466345'), ('331310',  '18971000000')]
    phones = [('56193',  '02423523312#15502619407'), ('56598',  '02483685777#13130220061'), ('67158',  '02486244540#13840001210'), ('21338',  '02486361230#13190017816'), ('89474',  '13002480356#15804087358'), ('32166',  '13019359188#13304005959'), ('85398',  '13032413386#13644312079'), ('31810',  '13050849868#13204209868'), ('4364',  '13066547543#15998838349'), ('6946',  '13066613015#13898113292'), ('72121',  '13066710156#17741810002'), ('22274',  '13066733975#18624411853'), ('6136',  '13066736888#15640107388'), ('56031',  '13071135381#18911061810'), ('14212',  '13072485743#13940394576'), ('42410',  '13079298050#13654022431'), ('66154',  '13080706025#13149828582'), ('100993',  '13080710300#13940083232'), ('39720',  '13109864982#13840074516'), ('78501',  '13109882609#18624095580'), ('36048',  '13130938989#18624222952'), ('21428',  '13147820838#15840367550'), ('14708',  '13190091630#13644906046'), ('58375',  '13190094423#13166790117'), ('24208',  '13238846398#02428632081'), ('76333',  '13238898133#13898866574'), ('30530',  '13240066891#15640385036'), ('30974',  '13252811767#13252811597'), ('21610',  '13284252471#02486116986'), ('9500',  '13304040096#13358866385'), ('46206',  '13309815763#17604019672'), ('50414',  '13309888581#18302421518'), ('52879',  '13314005006#17702429716'), ('63137',  '13322370555#15904279888'), ('89144',  '13322420946#13324021100'), ('4156',  '13324038623#15940439186'), ('37388',  '13324041681#13324041120'), ('6998',  '13332453399#15502412678'), ('84538',  '13352488782#13555815284'), ('92483',  '13369886908#15264089733'), ('128135',  '13386853777#13840359997'), ('58324',  '13392822598#13252852951'), ('65804',  '13439001025#13904523345'), ('30226',  '13464005821#15998566631'), ('79125',  '13464011766#13840501916'), ('9438',  '13464150123#13342470872'), ('32318',  '13470488881#18342544777'), ('6468',  '13478160207#13889104030'), ('39764',  '13478185065#13840427950'), ('64352',  '13478252888#18640282618'), ('20292',  '13478336536#13478338038'), ('37254',  '13478348025#13898829943'), ('61148',  '13478801820#13998177735'), ('55187',  '13504003026#13555774313'), ('34876',  '13504055065#18604040633'), ('68197',  '13504182670#13998223237'), ('8970',  '13504908695#13478838583'), ('71740',  '13504947926#18604012288'), ('30736',  '13504995672#18940089757'), ('78806',  '13514108383#15042358645'), ('17524',  '13514200278#13998301368'), ('18082',  '13555787296#13002418382'), ('25212',  '13555787296#13304021878'), ('25216',  '13555787296#13840140365'), ('25218',  '13555787296#13840349400'), ('25224',  '13555787296#13840584098'), ('26132',  '13555787296#13889195856'), ('20648',  '13555787296#13889389876'), ('20788',  '13555787296#15645124088'), ('62788',  '13555791891#13840141463'), ('65510',  '13555805785#18940197702'), ('20160',  '13555822750#13804032055'), ('10734',  '13555830725#13604018946'), ('4732',  '13591434319#13478885687'), ('64951',  '13591665933#18040030139'), ('89489',  '13591669483#13386820190'), ('32632',  '13591687166#02466870599'), ('14972',  '13591695413#13314192215'), ('130264',  '13592413834#13998821928'), ('7036',  '13604066815#13624034806'), ('14556',  '13604070578#13401002003'), ('102089',  '13604073636#13342424999'), ('129302',  '13604426956#18345196453'), ('67700',  '13604904915#15942066009'), ('7922',  '13604920099#13940132345'), ('75351',  '13609898182#14702418731'), ('29694',  '13610887919#13840171351'), ('14132',  '13614033558#13700023691'), ('79076',  '13614033805#13940120060'), ('79190',  '13644033428#13144656666'), ('47288',  '13644909695#15542221447'), ('107688',  '13664196661#18624065487'), ('56019',  '13674133324#13889854016'), ('82693',  '13674183914#13940369552'), ('61583',  '13674201101#13504975760'), ('14684',  '13694108820#13478212531'), ('10990',  '13694190325#18604059668'), ('89978',  '13700035032#13109856288'), ('62476',  '13700047449#15904022621'), ('41736',  '13700054861#13146873929'), ('18862',  '13704012511#13840577943'), ('91214',  '13704028555#13898842252'), ('138013',  '13704029888#15140299177'), ('79944',  '13709830825#13166660486'), ('23978',  '13709854966#13204020017'), ('137548',  '13804005325#15040373955'), ('9698',  '13804008088#13504020880'), ('28486',  '13804027800#18704072775'), ('133236',  '13804028763#13609831965'), ('949',  '13804033233#13840437828'), ('78777',  '13804039589#13909838078'), ('52944',  '13804046178#13889278035'), ('132697',  '13804215868#13904053005'), ('64863',  '13804400999#13804352555'), ('55038',  '13804452626#13700024088'), ('31156',  '13804984609#13940274335'), ('63412',  '13809838800#13386886055'), ('82859',  '13828019690#18566287978'), ('77620',  '13830163664#18841042778'), ('59869',  '13840003356#13504013778'), ('75834',  '13840007132#13889142733'), ('9240',  '13840027308#15847933888'), ('91979',  '13840059878#13940011676'), ('57710',  '13840075095#02423912609'), ('25704',  '13840095118#15004065983'), ('40978',  '13840102792#13940061307'), ('44620',  '13840191877#13840048500'), ('34106',  '13840202294#13478893115'), ('10628',  '13840205320#02428632091'), ('49552',  '13840263268#13309880871'), ('81528',  '13840263631#18809849555'), ('57156',  '13840333077#15142043778'), ('51604',  '13840433293#15204086506'), ('57428',  '13840508723#15002488980'), ('17586',  '13840596168#13324016957'), ('10158',  '13840597003#18953939317'), ('55329',  '13840918135#15940383996'), ('56516',  '13842029987#13109881545'), ('65544',  '13842034468#13940319996'), ('83847',  '13842050288#15940466666'), ('69363',  '13842404107#13604002119'), ('78834',  '13846684799#13940198889'), ('40712',  '13889118528#15940133524'), ('67104',  '13889126938#13066546380'), ('11644',  '13889159122#13478106193'), ('48556',  '13889192532#15504353100'), ('40616',  '13889239761#13998367421'), ('62380',  '13889260824#13149807861'), ('65503',  '13889271579#13898836249'), ('23722',  '13889317401#13889317407'), ('70030',  '13889340695#13842046202'), ('22152',  '13889347041#13840452139'), ('43580',  '13889350859#18809828046'), ('16236',  '13889351428#13274257007'), ('43122',  '13889807650#18842431869'), ('84224',  '13897936092#15640556153'), ('40342',  '13897946100#15041300306'), ('126597',  '13897996662#13478255585'), ('67982',  '13897999026#13940442186'), ('72775',  '13898080189#15642262795'), ('53666',  '13898113297#13324026022'), ('70600',  '13898122334#13504970793'), ('51892',  '13898131688#18640197848'), ('104617',  '13898178355#18698830718'), ('52171',  '13898806010#13304050175'), ('8136',  '13898806559#13836610059'), ('24310',  '13898844090#13889284099'), ('77952',  '13904021322#13945454233'), ('72642',  '13904025530#13889886613'), ('77879',  '13904032291#13904032261'), ('12408',  '13904034738#13384668666'), ('39550',  '13904050772#13624076677'), ('56825',  '13904279892#18942760988'), ('54953',  '13904300643#18604017285'), ('29470',  '13909888639#18640345932'), ('81876',  '13916078277#15242041979'), ('27652',  '13940002466#13940006765'), ('20342',  '13940009935#13304022592'), ('58599',  '13940028991#02483687416'), ('16174',  '13940043712#13897999591'), ('91355',  '13940056873#13840256455'), ('74972',  '13940071802#13940512583'), ('61232',  '13940091071#13940370917'), ('44236',  '13940125895#13940311032'), ('137029',  '13940128889#13840424896'), ('30288',  '13940163730#15609886699'), ('64562',  '13940167069#13998874301'), ('29982',  '13940231215#15840244583'), ('40244',  '13940292792#13909817408'), ('62286',  '13940295756#18802413881'), ('8508',  '13940298455#13840290276'), ('34512',  '13940311486#02483731913'), ('20652',  '13940339749#18704095521'), ('7166',  '13940409290#13609879512'), ('32578',  '13940453275#18609818825'), ('57433',  '13940560685#18512414685'), ('66352',  '13940575571#13940000793'), ('57535',  '13940596879#15002486596'), ('37914',  '13941061996#13700009032'), ('28972',  '13941505200#15140016060'), ('21978',  '13942272100#15042229693'), ('74997',  '13942303206#15941319730'), ('18666',  '13942350196#15102100293'), ('46680',  '13942518585#18624015575'), ('67928',  '13998137252#15204051285'), ('130038',  '13998138111#18340316666'), ('41528',  '13998139142#13998192842'), ('132715',  '13998252380#18900919196'), ('19124',  '13998265462#15840365011'), ('48446',  '13998287600#18640383890'), ('17258',  '13998309388#18642098788'), ('45646',  '13998322036#13840113615'), ('52455',  '13998337115#18910486380'), ('33410',  '13998370395#13940343761'), ('73497',  '13998376108#13020357775'), ('94612',  '13998804507#18940258181'), ('68664',  '13998841152#13700045003'), ('64942',  '13998852669#13324035858'), ('58092',  '14704044513#14704044514'), ('44724',  '14704046777#13898848078'), ('102614',  '15002422277#13889322277'), ('20742',  '15002428260#13478334927'), ('35938',  '15002458097#13940051202'), ('29268',  '15002487810#13478808628'), ('51144',  '15004002110#13840535813'), ('31590',  '15004002671#15242292481'), ('47156',  '15004098089#15504014636'), ('63507',  '15024545894#13601828727'), ('84029',  '15040004100#15040281542'), ('82269',  '15040162019#13080705022'), ('45566',  '15040199186#15541513883'), ('55324',  '15041423655#13840020969'), ('44308',  '15140006188#13166677767'), ('65673',  '15140011682#13190051974'), ('35924',  '15140022506#13940011331'), ('36964',  '15140045621#15204016069'), ('66707',  '15140052946#13066511190'), ('39980',  '15141018120#15041095120'), ('18364',  '15142017442#18646649999'), ('90072',  '15142088333#13889310883'), ('38384',  '15142197508#13889837605'), ('3090',  '15142597622#13897925284'), ('79242',  '15143556888#15802489986'), ('34344',  '15204071818#15242451133'), ('90409',  '15204409222#15604346988'), ('40812',  '15224488911#18604078866'), ('72577',  '15241449818#13020319210'), ('30834',  '15242080988#18809888550'), ('13326',  '15242317092#15941406969'), ('60202',  '15242475757#15242405800'), ('11668',  '15254601633#15288882025'), ('642',  '15304011080#13322400808'), ('15730',  '15309880997#15309887992'), ('53074',  '15309888230#13889365461'), ('18926',  '15330857111#15330859111'), ('71902',  '15330995795#15040086940'), ('91163',  '15502410299#18802418069'), ('8386',  '15502449593#13840233591'), ('2702',  '15541918888#18240441666'), ('79829',  '15541996708#18530068322'), ('66971',  '15638771877#18342726767'), ('61460',  '15640061315#13704022147'), ('54732',  '15640156173#13889196789'), ('60116',  '15640235689#15640235725'), ('14642',  '15640580859#18640398226'), ('69486',  '15640585607#13998872037'), ('93377',  '15668722336#13309887037'), ('2160',  '15698925899#13940949408'), ('17696',  '15712470800#13804059715'), ('76537',  '15802444506#18890861101'), ('10698',  '15804049218#15804049208'), ('73827',  '15804084228#18512498878'), ('14428',  '15811191473#13614023029'), ('68385',  '15840014607#18640055158'), ('76928',  '15840287808#13840248589'), ('70082',  '15840301403#18648880215'), ('21682',  '15840335872#13840106649'), ('90141',  '15840398166#13909839861'), ('107064',  '15840406888#15204043940'), ('90543',  '15840416548#15940091349'), ('74445',  '15840466615#17076268755'), ('104761',  '15840498111#15840498000'), ('36696',  '15842108293#13664152654'), ('80745',  '15900858997#15940560025'), ('62129',  '15902495199#15998892497'), ('36820',  '15904029666#13898851650'), ('62457',  '15904089929#13591669999'), ('108039',  '15904272555#18204266101'), ('73842',  '15915744334#13286666731'), ('114420',  '15940145027#13664484013'), ('9976',  '15940160177#18640316857'), ('134763',  '15940216133#13889209993'), ('36570',  '15940322465#13889847906'), ('10656',  '15940355905#18940017651'), ('6748',  '15940368545#15002445952'), ('61886',  '15940375200#13022416143'), ('23854',  '15940386921#13514196725'), ('51930',  '15940422005#15040127323'), ('97592',  '15940431918#18704089627'), ('15732',  '15940511007#18640575599'), ('67103',  '15940531902#15140096322'), ('57305',  '15940588772#13478308696'), ('2259',  '15942930753#13149836430'), ('9294',  '15998296655#13704046655'), ('70098',  '15998338833#15840566895'), ('11264',  '15998840638#15140110358'), ('79793',  '15998864836#13897946838'), ('56579',  '17076025463#18909821756'), ('73660',  '17092421551#13840520160'), ('108895',  '17302423750#13382447589'), ('62430',  '17702435305#15142044549'), ('48736',  '17702485151#13390118646'), ('29848',  '18004010903#18004010508'), ('72234',  '18017318662#02431875016'), ('45954',  '18040078635#15840198165'), ('50936',  '18041377976#13998358669'), ('84636',  '18100401777#15642007258'), ('29788',  '18121252405#15502405980'), ('97226',  '18200987521#18664995122'), ('31752',  '18240002689#13940315855'), ('33056',  '18240131314#13804999194'), ('72244',  '18240295551#18240295552'), ('37980',  '18240357000#13664191111'), ('83396',  '18240400263#18304140277'), ('9898',  '18302462998#13823777422'), ('50120',  '18512410484#18941647976'), ('71191',  '18545592826#15840438662'), ('100756',  '18602403129#13066797569'), ('125603',  '18602416523#18735233456'), ('43058',  '18602419613#15840308520'), ('16524',  '18602435099#18602459642'), ('70394',  '18602455965#13019305988'), ('6760',  '18604020220#13840299402'), ('27134',  '18604035793#15840588448'), ('2438',  '18604141815#18640450768'), ('62298',  '18604158048#15942574076'), ('10688',  '18604512982#13889316071'), ('48612',  '18608989377#13998316566'), ('4526',  '18609812765#18240060099'), ('92522',  '18624001546#18240212216'), ('73980',  '18624007028#15242050303'), ('62197',  '18624032949#13889112387'), ('3226',  '18624313168#13889137750'), ('27182',  '18640067816#15142053358'), ('75631',  '18640088047#13654975303'), ('35200',  '18640152139#18640710930'), ('30082',  '18640183178#15998161190'), ('109603',  '18640189382#18602456787'), ('80120',  '18640200783#13066763456'), ('40738',  '18640308763#18640308769'), ('104592',  '18640319531#13889283312'), ('27336',  '18640338879#18742205261'), ('73401',  '18640452750#15940468721'), ('96115',  '18640467197#13840557245'), ('72008',  '18640467275#13019345035'), ('38030',  '18640468970#18640083039'), ('15058',  '18640485109#13134242209'), ('31902',  '18640496677#18940229055'), ('28240',  '18640510811#18640519599'), ('61523',  '18641771081#15714278603'), ('70570',  '18642049801#18640551629'), ('9592',  '18642084325#13904033305'), ('27494',  '18642099005#18642099009'), ('53492',  '18642934599#18742411996'), ('28768',  '18665612224#18664686660'), ('74717',  '18698832991#15566870088'), ('852',  '18698841415#13654184185'), ('40016',  '18698893363#13614048868'), ('92561',  '18704051117#18704061117'), ('117439',  '18740016622#13940210270'), ('11858',  '18742430813#13066607733'), ('47508',  '18802425721#13654033292'), ('75003',  '18802466092#18698825936'), ('24410',  '18802483995#18043419577'), ('4302',  '18809870314#13609876442'), ('36960',  '18840064715#18840064719'), ('53458',  '18840671677#18240295858'), ('2486',  '18842511155#13840164175'), ('65501',  '18842553960#18842553690'), ('104426',  '18842577866#18804026366'), ('3536',  '18909882442#18940255337'), ('36146',  '18909883076#15041374777'), ('56764',  '18909885967#13804034111'), ('830',  '18940001211#18940095699'), ('562',  '18940032876#18940032817'), ('87561',  '18940207660#18969963765'), ('11848',  '18940255100#15840284866'), ('128682',  '18940258979#18940255238')]
    phones = []
    
    result = []
    
    for phone in phones:
        
        cid = phone[0]
        
        phone0 = phone[1].split('#')[0]
        phone1 = phone[1].split('#')[1]
        
        content0 = encrypt(phone0, key, iv)
        content1 = encrypt(phone1, key, iv)
        
        if phone0.startswith("1"):
            print("update communion.customer set phone = '%s' where cid = %s;" % (content0, cid))
            result.append("(%s, '%s', 0, 0)" % (cid, content1))
        else:
            print("update communion.customer set phone = '%s' where cid = %s;" % (content1, cid))
            result.append("(%s, '%s', 0, 0)" % (cid, content0))
        
#        print("update communion.customer set phone = '%s' where cid = %s;" % (content, cid))
#        print("update communion.customerphone set phone = '%s' where cpid = %s;" % (content, cid))
        
    print(",".join(result))